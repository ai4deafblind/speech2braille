# Speech2Braille Server Configuration
# Copy this file to .env and modify as needed

# =============================================================================
# ASR (Automatic Speech Recognition) Configuration
# =============================================================================

# Whisper model name (tiny, base, small, medium, large-v3)
S2B_ASR_MODEL_NAME=base

# Optional path to local GGML model file (overrides model_name if set)
# S2B_ASR_MODEL_PATH=/path/to/ggml-model.bin

# Number of threads for inference
S2B_ASR_N_THREADS=4

# Default language for transcription (required for whisper.cpp)
S2B_ASR_DEFAULT_LANGUAGE=en

# Non-speech suppression (reduces hallucinations on silence/noise)
# Note: suppress_non_speech_tokens is not exposed in pywhispercpp C bindings (v1.4.1)
S2B_ASR_SUPPRESS_BLANK=true

# Quality thresholds for filtering low-confidence output
S2B_ASR_ENTROPY_THOLD=2.4
S2B_ASR_LOGPROB_THOLD=-1.0
S2B_ASR_NO_SPEECH_THOLD=0.6

# Streaming optimization
S2B_ASR_TEMPERATURE=0.0
S2B_ASR_SPLIT_ON_WORD=true

# =============================================================================
# WebSocket Streaming Configuration
# =============================================================================

# Audio sample rate in Hz
S2B_WS_SAMPLE_RATE=16000

# Process audio every N seconds (chunk duration for real-time output)
S2B_WS_CHUNK_DURATION=3.0

# Maximum buffer duration before force processing (safety limit)
S2B_WS_BUFFER_LIMIT=30.0

# Minimum audio duration to process
S2B_WS_MIN_DURATION=0.5

# Context carryover for better continuity between chunks
S2B_WS_CONTEXT_WINDOW_SECONDS=1.0
S2B_WS_USE_CONTEXT_CARRYOVER=true

# =============================================================================
# Braille Translation Configuration
# =============================================================================

# Default braille table (see /api/tables for available options)
S2B_BRAILLE_DEFAULT_TABLE=en-ueb-g2.ctb

# =============================================================================
# CORS Configuration
# =============================================================================

# Allowed origins (comma-separated, use * for all)
# S2B_CORS_ALLOW_ORIGINS=["http://localhost:5173","http://localhost:3000"]
S2B_CORS_ALLOW_ORIGINS=["*"]
S2B_CORS_ALLOW_CREDENTIALS=true
S2B_CORS_ALLOW_METHODS=["*"]
S2B_CORS_ALLOW_HEADERS=["*"]

# =============================================================================
# Application Metadata
# =============================================================================

S2B_APP_TITLE=Brailler API
S2B_APP_VERSION=0.0.1
